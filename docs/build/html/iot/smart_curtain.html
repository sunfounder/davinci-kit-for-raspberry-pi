

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Smart Curtain &mdash; SunFounder Da Vinci Kit  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://ezblock.cc/readDocFile/topHead.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="https://ezblock.cc/readDocFile/topHead.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Attendance system" href="attendance_system.html" />
    <link rel="prev" title="Smart Light" href="smart_light.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> SunFounder Da Vinci Kit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../component_list.html">Component List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preparation.html">Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libraries.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpio_extension_board.html">GPIO Extension Board</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download_the_code.html">Download the Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_output.html">1 Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_input.html">2 Input</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_extension.html">3 Extension</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="4_iot_projects.html">4 IOT</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quick_guide_on_cloud4RPi.html">Quick Guide on Cloud4RPi</a></li>
<li class="toctree-l2"><a class="reference internal" href="learn_more_about_control.py.html">Learn More about <code class="docutils literal notranslate"><span class="pre">control.py</span></code></a></li>
<li class="toctree-l2 current"><a class="reference internal" href="iot_projects.html">Projects</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="temperature_and_humidity_acquisition.html">Temperature and Humidity Acquisition</a></li>
<li class="toctree-l3"><a class="reference internal" href="remote_switch.html">Remote Switch</a></li>
<li class="toctree-l3"><a class="reference internal" href="smart_light.html">Smart Light</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Smart Curtain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#experimental-procedures">Experimental Procedures</a></li>
<li class="toctree-l4"><a class="reference internal" href="#code-explanation">Code Explanation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="attendance_system.html">Attendance system</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../processing/play_with_processing.html">Play with Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scratch/play_with_scratch.html">Play with Scratch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Appendix</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SunFounder Da Vinci Kit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="4_iot_projects.html">4 IOT</a> &raquo;</li>
        
          <li><a href="iot_projects.html">Projects</a> &raquo;</li>
        
      <li>Smart Curtain</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/iot/smart_curtain.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="smart-curtain">
<h1>Smart Curtain<a class="headerlink" href="#smart-curtain" title="Permalink to this headline">¶</a></h1>
<p>In this project, we will simulate a scenario where the curtains are automatically opened or closed according to the brightness of the room.
When the photoresistor detects that the room brightness is too bright, Raspberry Pi will drive the motor to close the curtain; when the room brightness is too dark, the curtain will be opened.</p>
<p>Also you can view the indoor brightness change through text widget on Cloud4RPi, or control the lamp with Switch widget (for electricity safety, this experiment uses LED instead).</p>
<div class="section" id="experimental-procedures">
<h2>Experimental Procedures<a class="headerlink" href="#experimental-procedures" title="Permalink to this headline">¶</a></h2>
<p>Build the circuit.</p>
<img alt="../_images/window1.png" class="align-center" src="../_images/window1.png" />
<p>Open the code.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /home/pi/cloud4rpi-raspberrypi-python
sudo nano smart_curtain.py
</pre></div>
</div>
<p>Find the line below and fill in the correct device token.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DEVICE_TOKEN</span> <span class="o">=</span> <span class="s1">&#39;__YOUR_DEVICE_TOKEN__&#39;</span>
</pre></div>
</div>
<p>Run the code.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo python3 smart_curtain.py
</pre></div>
</div>
<p>Go to Cloud4RPi, add a new control panel named <strong>project4</strong> and add 3 widgets (Switch, Text and Chart widgets) via the <strong>Add Widget</strong> button.</p>
<img alt="../_images/window2.png" class="align-center" src="../_images/window2.png" />
<p>Once added, you can use the Switch widget to control the LED; the value of the photoresistor on the Text widget will be updated every 1 minute, when the value &gt; 100, the motor rotates clockwise for 5 seconds; if the value is less than 20, the motor rotates counterclockwise for 5 seconds.
You can see the change over time in the Chart widget.</p>
</div>
<div class="section" id="code-explanation">
<h2>Code Explanation<a class="headerlink" href="#code-explanation" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getValue</span><span class="p">():</span>
    <span class="n">analogVal</span> <span class="o">=</span> <span class="n">ADC0834</span><span class="o">.</span><span class="n">getResult</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">analogVal</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
        <span class="n">move</span><span class="o">.</span><span class="n">clockwise</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">move</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">analogVal</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
        <span class="n">move</span><span class="o">.</span><span class="n">contrarotate</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">move</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">analogVal</span>
</pre></div>
</div>
<p>Read the value of channel CH0 (with photoresistor connected) of the ADC0834. If the value is &gt;100, the motor rotates clockwise for 5 seconds. If the value is less than 20, the motor rotates counterclockwise for 5 seconds.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;CPU Temp&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;numeric&#39;</span><span class="p">,</span>
        <span class="s1">&#39;bind&#39;</span><span class="p">:</span> <span class="n">getValue</span>
    <span class="p">},</span>
</pre></div>
</div>
<p>Pass <code class="docutils literal notranslate"><span class="pre">getValue()</span></code> into the <code class="docutils literal notranslate"><span class="pre">'bind'</span></code> key as a callback function, so that the brightness value (the return value of the <code class="docutils literal notranslate"><span class="pre">getValue()</span></code> function) can be sent to the Text widget.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="attendance_system.html" class="btn btn-neutral float-right" title="Attendance system" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="smart_light.html" class="btn btn-neutral float-left" title="Smart Light" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, sunfounder.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>