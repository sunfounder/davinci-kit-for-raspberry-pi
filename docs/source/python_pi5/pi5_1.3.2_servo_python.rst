.. note::

    隆Hola! Bienvenido a la Comunidad de Entusiastas de SunFounder para Raspberry Pi, Arduino y ESP32 en Facebook. Sum茅rgete en el mundo de Raspberry Pi, Arduino y ESP32 junto a otros entusiastas.

    **驴Por qu茅 unirse?**

    - **Soporte Experto**: Resuelve problemas postventa y desaf铆os t茅cnicos con la ayuda de nuestra comunidad y equipo.
    - **Aprende y Comparte**: Intercambia consejos y tutoriales para mejorar tus habilidades.
    - **Avances Exclusivos**: Accede anticipadamente a anuncios de nuevos productos y adelantos exclusivos.
    - **Descuentos Especiales**: Aprovecha descuentos exclusivos en nuestros productos m谩s recientes.
    - **Promociones Festivas y Sorteos**: Participa en sorteos y promociones especiales.

     驴Listo para explorar y crear con nosotros? Haz clic en [|link_sf_facebook|] y 煤nete hoy mismo.

.. _1.3.2_py_pi5:

1.3.2 Servo
=============

Introducci贸n
---------------

En este proyecto, aprenderemos c贸mo hacer que el servo gire.

Componentes Necesarios
--------------------------

Para este proyecto, necesitamos los siguientes componentes. 

.. image:: ../python_pi5/img/1.3.2_servo_list.png


Diagrama de Conexiones
------------------------

.. image:: ../img/image337.png


Procedimientos del Experimento
---------------------------------

**Paso 1:** Construye el circuito.

.. image:: ../img/image125.png

**Paso 2**: Accede al directorio del c贸digo.

.. raw:: html

   <run></run>

.. code-block::

    cd ~/davinci-kit-for-raspberry-pi/python-pi5

**Paso 3**: Ejecuta el archivo.

.. raw:: html

   <run></run>

.. code-block::

    sudo python3 1.3.2_Servo.py

Al ejecutar el programa, el servo girar谩 de 0 grados a 90, luego a 180 grados, y despu茅s volver谩 de 180 grados a 90 y finalmente a 0 grados, en un ciclo continuo.

.. warning::

    Si aparece el mensaje de error ``RuntimeError: Cannot determine SOC peripheral base address``, consulta :ref:`faq_soc` 

**C贸digo**

.. note::

    Puedes **Modificar/Restablecer/Copiar/Ejecutar/Detener** el c贸digo a continuaci贸n. Antes de eso, aseg煤rate de estar en la ruta del c贸digo fuente, como ``davinci-kit-for-raspberry-pi/python-pi5``. Despu茅s de modificar el c贸digo, puedes ejecutarlo directamente para ver el efecto.


.. raw:: html

    <run></run>

.. code-block:: python

   #!/usr/bin/env python3
   from gpiozero import Servo
   from time import sleep

   # Configura el n煤mero de pin GPIO al que est谩 conectado el servo
   myGPIO = 18

   # Define un factor de correcci贸n para ajustar la anchura del pulso del servo
   myCorrection = 0.45
   maxPW = (2.0 + myCorrection) / 1000  # Calcula la anchura de pulso m谩xima
   minPW = (1.0 - myCorrection) / 1000  # Calcula la anchura de pulso m铆nima

   # Inicializa el objeto Servo con anchuras de pulso personalizadas
   servo = Servo(myGPIO, min_pulse_width=minPW, max_pulse_width=maxPW)

   try:
       while True:
           # Posiciona el servo en el centro y espera
           servo.mid()
           print("mid")  # Indica la posici贸n actual
           sleep(0.5)       # Pausa breve de 0.5 segundos

           # Mueve el servo a su posici贸n m铆nima y espera
           servo.min()
           print("min")   # Indica la posici贸n actual
           sleep(1)          # Mantiene la posici贸n durante 1 segundo

           # Devuelve el servo a la posici贸n central y espera
           servo.mid()
           print("mid")   # Indica la posici贸n actual
           sleep(0.5)        # Pausa breve de 0.5 segundos

           # Mueve el servo a su posici贸n m谩xima y espera
           servo.max()
           print("max")   # Indica la posici贸n actual
           sleep(1)          # Mantiene la posici贸n durante 1 segundo

   except KeyboardInterrupt:
       # Termina el script de forma segura en una interrupci贸n de teclado (Ctrl+C)
       pass
    

**Explicaci贸n del C贸digo**

#. Estas instrucciones de importaci贸n traen la clase ``Servo`` para el control del servo y la funci贸n ``sleep`` para temporizaci贸n.

   .. code-block:: python

       #!/usr/bin/env python3
       from gpiozero import Servo
       from time import sleep

#. Configura el pin GPIO n煤mero 18 para conectar el servo motor.

   .. code-block:: python

       # Configura el n煤mero de pin GPIO al que est谩 conectado el servo
       myGPIO = 18

#. Estas l铆neas definen un factor de correcci贸n y lo usan para calcular las anchuras de pulso m谩xima y m铆nima del servo, ajustando su rango de movimiento.

   .. code-block:: python

       # Define un factor de correcci贸n para ajustar la anchura del pulso del servo
       myCorrection = 0.45
       maxPW = (2.0 + myCorrection) / 1000  # Calcula la anchura de pulso m谩xima
       minPW = (1.0 - myCorrection) / 1000  # Calcula la anchura de pulso m铆nima

#. Inicializa el objeto Servo con el pin GPIO especificado y anchuras de pulso personalizadas.

   .. code-block:: python

       # Inicializa el objeto Servo con anchuras de pulso personalizadas
       servo = Servo(myGPIO, min_pulse_width=minPW, max_pulse_width=maxPW)

#. El bloque `try` contiene un bucle `while True` para mover el servo continuamente. El servo se posiciona en los puntos central, m铆nimo y m谩ximo, con cada posici贸n impresa y mantenida durante una duraci贸n espec铆fica.

   .. code-block:: python

       try:
           while True:
               # Posiciona el servo en el centro y espera
               servo.mid()
               print("mid")  # Indica la posici贸n actual
               sleep(0.5)       # Pausa breve de 0.5 segundos

               # Mueve el servo a su posici贸n m铆nima y espera
               servo.min()
               print("min")   # Indica la posici贸n actual
               sleep(1)          # Mantiene la posici贸n durante 1 segundo

               # Devuelve el servo a la posici贸n central y espera
               servo.mid()
               print("mid")   # Indica la posici贸n actual
               sleep(0.5)        # Pausa breve de 0.5 segundos

               # Mueve el servo a su posici贸n m谩xima y espera
               servo.max()
               print("max")   # Indica la posici贸n actual
               sleep(1)          # Mantiene la posici贸n durante 1 segundo

       except KeyboardInterrupt:
           # Termina el script de forma segura en una interrupci贸n de teclado (Ctrl+C)
           pass
