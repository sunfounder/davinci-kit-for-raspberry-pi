.. note::

    隆Hola! Bienvenido a la Comunidad de Entusiastas de SunFounder para Raspberry Pi, Arduino y ESP32 en Facebook. Sum茅rgete en el apasionante mundo de Raspberry Pi, Arduino y ESP32 junto a otros entusiastas.

    **驴Por qu茅 unirte?**

    - **Soporte Experto**: Resuelve problemas postventa y desaf铆os t茅cnicos con la ayuda de nuestra comunidad y equipo.
    - **Aprende y Comparte**: Intercambia consejos y tutoriales para mejorar tus habilidades.
    - **Avances Exclusivos**: Obt茅n acceso anticipado a nuevos anuncios de productos y adelantos exclusivos.
    - **Descuentos Especiales**: Disfruta de descuentos exclusivos en nuestros productos m谩s recientes.
    - **Promociones Festivas y Sorteos**: Participa en sorteos y promociones especiales de temporada.

     驴Listo para explorar y crear con nosotros? Haz clic en [|link_sf_facebook|] y 煤nete hoy mismo.

1.1.3 Barra de LED
====================

Introducci贸n
---------------

En este proyecto, iluminaremos secuencialmente los LEDs en la barra de LED.

Componentes
--------------

.. image:: img/list_led_bar.png

Diagrama del Circuito
------------------------

.. image:: img/schematic_led_bar.png

Procedimiento Experimental
-----------------------------

**Paso 1**: Construye el circuito.

.. note::
    Presta atenci贸n a la direcci贸n al conectar. Si lo conectas al rev茅s, no se encender谩.

.. image:: img/image66.png

**Paso 2**: Dir铆gete a la carpeta del c贸digo.

.. raw:: html

    <run></run>

.. code-block:: 

    cd ~/davinci-kit-for-raspberry-pi/nodejs/ 

**Paso 3**: Ejecuta el c贸digo.

.. raw:: html

    <run></run>

.. code-block:: 

    sudo node led_bar_graph.js

Despu茅s de ejecutar el c贸digo, ver谩s que los LEDs en la barra de LED se encienden y apagan regularmente.

**C贸digo**

.. code-block:: js

    const Gpio = require('pigpio').Gpio;

    var pins = [17, 18, 27, 22, 23, 24, 25, 2, 3, 8];
    var leds = [];
    for (let i = 0; i < pins.length; i++) {
        leds[i] = new Gpio(pins[i], { mode: Gpio.OUTPUT });
    }

    function oddLedBarGraph() {
        for (let i = 0; i < leds.length; i++) {
            if (i % 2 == 1) {
                leds[i].digitalWrite(1);
            } else {
                leds[i].digitalWrite(0);
            }
        }
    }

    function evenLedBarGraph() {
        for (let i = 0; i < leds.length; i++) {
            if (i % 2 == 0) {
                leds[i].digitalWrite(1);
            } else {
                leds[i].digitalWrite(0);
            }
        };
    }

    var odd_even = 0;

    setInterval(() => {
        odd_even = (odd_even + 1) % 2;
        if (odd_even == 1) {
            oddLedBarGraph();
        } else {
            evenLedBarGraph();
        }
    }, 500);
  

**Explicaci贸n del C贸digo**

.. code-block:: js

    var pins = [17,18,27,22,23,24,25,2,3,8];

Como la barra de LED usar谩 varios pines, creamos un arreglo constante ``pins`` para almacenarlos en conjunto.

.. code-block:: js

    var leds = [];
    for (let i = 0; i < pins.length; i++) {
        leds[i] = new Gpio(pins[i], { mode: Gpio.OUTPUT });
    }

Instanciamos estos pines como objetos leds usando un bucle for.

.. code-block:: js

    function oddLedBarGraph() {
        for (let i = 0; i < leds.length; i++) {
            if (i % 2 == 1) {
                leds[i].digitalWrite(1);
            } else {
                leds[i].digitalWrite(0);
            }
        }
    }

Implementa una funci贸n ``oddLedBarGraph()`` para que se enciendan los LEDs 
en las posiciones impares de la barra de LED.

.. code-block:: js

    function evenLedBarGraph() {
        for (let i = 0; i < leds.length; i++) {
            if (i % 2 == 0) {
                leds[i].digitalWrite(1);
            } else {
                leds[i].digitalWrite(0);
            }
        };
    }

Implementa una funci贸n ``evenLedBarGraph()`` para que se enciendan los LEDs 
en las posiciones pares de la barra de LED.

.. code-block:: js

    var odd_even = 0;

    setInterval(() => {
        odd_even = (odd_even + 1) % 2;
        if (odd_even == 1) {
            oddLedBarGraph();
        } else {
            evenLedBarGraph();
        }
    }, 500);

El estado de funcionamiento del LED cambia cada 500ms.

Imagen del Fen贸meno
-----------------------

.. image:: img/image67.jpeg



