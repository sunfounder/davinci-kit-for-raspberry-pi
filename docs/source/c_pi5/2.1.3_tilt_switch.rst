.. note::

    춰Hola! Bienvenido a la comunidad de entusiastas de SunFounder Raspberry Pi, Arduino y ESP32 en Facebook. Profundiza en Raspberry Pi, Arduino y ESP32 junto a otros entusiastas.

    **쯇or qu칠 unirte?**

    - **Soporte experto**: Resuelve problemas post-venta y desaf칤os t칠cnicos con la ayuda de nuestra comunidad y equipo.
    - **Aprender y compartir**: Intercambia consejos y tutoriales para mejorar tus habilidades.
    - **Avances exclusivos**: Accede anticipadamente a anuncios de nuevos productos y vistas previas.
    - **Descuentos especiales**: Disfruta de descuentos exclusivos en nuestros productos m치s recientes.
    - **Promociones festivas y sorteos**: Participa en sorteos y promociones navide침as.

    游녤 쯃isto para explorar y crear con nosotros? Haz clic en [|link_sf_facebook|] y 칰nete hoy.

2.1.3 Interruptor de inclinaci칩n
==================================

Introducci칩n
---------------

Este es un interruptor de inclinaci칩n con una bola met치lica en su interior. Se utiliza para detectar inclinaciones de un peque침o 치ngulo.

Componentes
-------------

.. image:: img/list_2.1.3_tilt_switch.png


Principio
------------

**Interruptor de inclinaci칩n**

El principio es muy simple. Cuando el interruptor se inclina a un cierto 치ngulo, 
la bola en su interior rueda y toca los dos contactos conectados a los pines 
externos, activando as칤 los circuitos. De lo contrario, la bola se mantendr치 
alejada de los contactos, interrumpiendo as칤 los circuitos.

.. image:: img/image167.png

Diagrama Esquem치tico
------------------------

.. image:: img/image307.png


.. image:: img/image308.png


Procedimientos Experimentales
------------------------------------

**Paso 1:** Construir el circuito.

.. image:: img/image169.png
    :width: 800

**Paso 2:** Cambiar de directorio.

.. raw:: html

   <run></run>

.. code-block::

    cd ~/davinci-kit-for-raspberry-pi/c/2.1.3/

**Paso 3:** Compilar.

.. raw:: html

   <run></run>

.. code-block::

    gcc 2.1.3_Tilt.c -lwiringPi

**Paso 4:** Ejecutar.

.. raw:: html

   <run></run>

.. code-block::

    sudo ./a.out

Coloca el interruptor en posici칩n horizontal, y el LED verde se encender치. 
Si lo inclinas, se imprimir치 "춰Inclinaci칩n!" en la pantalla y se encender치 
el LED rojo. Col칩calo nuevamente en posici칩n horizontal, y el LED verde se 
encender치 de nuevo.

.. note::

    Si no funciona despu칠s de ejecutarlo, o si aparece un mensaje de error: \"wiringPi.h: No such file or directory", consulta :ref:`C code is not working?`.

**C칩digo**

.. code-block:: c

    #include <wiringPi.h>
    #include <stdio.h>

    #define TiltPin     0
    #define Gpin        2
    #define Rpin        3

    void LED(char* color)
    {
        pinMode(Gpin, OUTPUT);
        pinMode(Rpin, OUTPUT);
        if (color == "RED")
        {
            digitalWrite(Rpin, HIGH);
            digitalWrite(Gpin, LOW);
        }
        else if (color == "GREEN")
        {
            digitalWrite(Rpin, LOW);
            digitalWrite(Gpin, HIGH);
        }
        else
            printf("LED Error");
    }

    int main(void)
    {
        // Cuando la inicializaci칩n falla, imprime un mensaje en pantalla
        if(wiringPiSetup() == -1){
            printf("setup wiringPi failed !");
            return 1;
        }

        pinMode(TiltPin, INPUT);
        LED("GREEN");
        
        while(1){
            // Indica que el bot칩n ha sido presionado
            if(0 == digitalRead(TiltPin)){
                delay(10);
                if(0 == digitalRead(TiltPin)){
                    LED("RED");
                    printf("Tilt!\n");
                    delay(100);
                }
            }
            else if(1 == digitalRead(TiltPin)){
                delay(10);
                if(1 == digitalRead(TiltPin)){
                    LED("GREEN");
                }
            }
        }
        return 0;
    }

**Explicaci칩n del C칩digo**

.. code-block:: c

    void LED(char* color)
    {
        pinMode(Gpin, OUTPUT);
        pinMode(Rpin, OUTPUT);
        if (color == "RED")
        {
            digitalWrite(Rpin, HIGH);
            digitalWrite(Gpin, LOW);
        }
        else if (color == "GREEN")
        {
            digitalWrite(Rpin, LOW);
                digitalWrite(Gpin, HIGH);
        }
        else
            printf("LED Error");
        }

Cuando el interruptor de inclinaci칩n est치 inclinado hacia la derecha, el pin 
del medio y el de la derecha est치n conectados; la Raspberry Pi lee un nivel 
alto en el pin del medio, por lo que el LED1 se enciende y el LED2 se apaga.

.. code-block:: c

    while(1){
            if(0 == digitalRead(TiltPin)){
                delay(10);
                if(0 == digitalRead(TiltPin)){
                    LED("RED");
                    printf("Tilt!\n");
                }
            }
            else if(1 == digitalRead(TiltPin)){
                delay(10);
                if(1 == digitalRead(TiltPin)){
                    LED("GREEN");
                }
            }
        }

Cuando el interruptor de inclinaci칩n est치 inclinado hacia la izquierda, 
el pin del medio y el de la izquierda est치n conectados; la Raspberry Pi 
lee un nivel bajo, por lo que el LED2 se enciende y el LED1 se apaga.
