.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounderã®Raspberry Pi & Arduino & ESP32æ„›å¥½å®¶ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ãï¼Facebookä¸Šã§Raspberry Piã€Arduinoã€ESP32ã«ã¤ã„ã¦ã‚‚ã£ã¨æ·±ãæ˜ã‚Šä¸‹ã’ã€ä»–ã®æ„›å¥½å®¶ã¨äº¤æµã—ã¾ã—ã‚‡ã†ã€‚

    **å‚åŠ ã™ã‚‹ç†ç”±ã¯ï¼Ÿ**

    - **ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚µãƒãƒ¼ãƒˆ**ï¼šã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã€è²©å£²å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚
    - **å­¦ã³ï¼†å…±æœ‰**ï¼šãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã—ã¦ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚
    - **ç‹¬å çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šæ–°è£½å“ã®ç™ºè¡¨ã‚„å…ˆè¡Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«æ—©æœŸã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**ï¼šæœ€æ–°è£½å“ã®ç‹¬å å‰²å¼•ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚
    - **ç¥­ã‚Šã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚®ãƒ•ãƒˆ**ï¼šã‚®ãƒ•ãƒˆã‚„ç¥æ—¥ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¾ã—ã‚‡ã†ã€‚

    ğŸ‘‰ ç§ãŸã¡ã¨ä¸€ç·’ã«æ¢ç´¢ã—ã€å‰µé€ ã™ã‚‹æº–å‚™ã¯ã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼

1.1.3 LEDæ£’ã‚°ãƒ©ãƒ•
======================

å‰æ›¸ã
-------------

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€LEDæ£’ã‚°ãƒ©ãƒ•ã®ãƒ©ã‚¤ãƒˆã‚’é †ç•ªã«ç‚¹ç¯ã•ã›ã‚‹ã€‚

éƒ¨å“
----------------

.. image:: media/list_led_bar.png


åŸç†
--------------

**LEDæ£’ã‚°ãƒ©ãƒ•**

LEDæ£’ã‚°ãƒ©ãƒ•ã¯ã€é›»å­å›è·¯ã¾ãŸã¯ãƒã‚¤ã‚¯ãƒ­ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ã®æ¥ç¶šã«ä½¿ç”¨ã•ã‚Œã‚‹LEDé…åˆ—ã§ã‚ã‚‹ã€‚10å€‹ã®å€‹åˆ¥ã®LEDã‚’10æœ¬ã®å‡ºåŠ›ãƒ”ãƒ³ã«æ¥ç¶šã™ã‚‹ã‚ˆã†ã«ã€LEDæ£’ã‚°ãƒ©ãƒ•ã‚’å›è·¯ã«ç°¡å˜ã«æ¥ç¶šã§ãã‚‹ã€‚
é€šå¸¸ã€LEDæ£’ã‚°ãƒ©ãƒ•ã¯ã€ãƒãƒƒãƒ†ãƒªãƒ¼ãƒ¬ãƒ™ãƒ«ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã€ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªæ©Ÿå™¨ã€ãŠã‚ˆã³ç”£æ¥­ç”¨åˆ¶å¾¡ãƒ‘ãƒãƒ«ã¨ã—ã¦ä½¿ç”¨ã§ãã‚‹ã€‚LEDæ£’ã‚°ãƒ©ãƒ•ã«ã¯ä»–ã«ã‚‚å¤šãã®ç”¨é€”ãŒã‚ã‚‹ã€‚

.. image:: media/led_bar_sche.png

å›è·¯å›³
-------------------------

============ ======== ======== ===
T-Board Name physical wiringPi BCM
GPIO17       Pin 11   0        17
GPIO18       Pin 12   1        18
GPIO27       Pin 13   2        27
GPIO22       Pin 15   3        22
GPIO23       Pin 16   4        23
GPIO24       Pin 18   5        24
GPIO25       Pin 22   6        25
SDA1         Pin 3    8        2
SCL1         Pin 5    9        3
SPICE0       Pin 24   10       8
============ ======== ======== ===

.. image:: media/schematic_led_bar.png


å®Ÿé¨“æ‰‹é †
------------------------------

ã‚¹ãƒ†ãƒƒãƒ—1: å›è·¯ã‚’ä½œã‚‹ã€‚

.. image:: media/image66.png
    :width: 800
    
Cè¨€èªãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘
^^^^^^^^^^^^^^^^^^^^^^^^^

ã‚¹ãƒ†ãƒƒãƒ—2: ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«å…¥ã‚‹ã€‚

.. raw:: html

   <run></run>

.. code-block::

    cd ~/davinci-kit-for-raspberry-pi/c/1.1.3/

ã‚¹ãƒ†ãƒƒãƒ—3: ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã€‚

.. raw:: html

   <run></run>

.. code-block::

    gcc 1.1.3_LedBarGraph.c -lwiringPi

ã‚¹ãƒ†ãƒƒãƒ—4: EXEãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

.. raw:: html

   <run></run>

.. code-block::

    sudo ./a.out

ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œå¾Œã€LEDãƒãƒ¼ã®LEDãŒå®šæœŸçš„ã«ã‚ªãƒ³/ã‚ªãƒ•ã«ãªã‚‹ã€‚

    
**ã‚³ãƒ¼ãƒ‰**

.. code-block:: c

    #include <wiringPi.h>
    #include <stdio.h>

    int pins[10] = {0,1,2,3,4,5,6,8,9,10};
    void oddLedBarGraph(void){
        for(int i=0;i<5;i++){
            int j=i*2;
            digitalWrite(pins[j],HIGH);
            delay(300);
            digitalWrite(pins[j],LOW);
        }
    }
    void evenLedBarGraph(void){
        for(int i=0;i<5;i++){
            int j=i*2+1;
            digitalWrite(pins[j],HIGH);
            delay(300);
            digitalWrite(pins[j],LOW);
        }
    }
    void allLedBarGraph(void){
        for(int i=0;i<10;i++){
            digitalWrite(pins[i],HIGH);
            delay(300);
            digitalWrite(pins[i],LOW);
        }
    }
    int main(void)
    {
        if(wiringPiSetup() == -1){ //when initialize wiring failed,print message to screen
            printf("setup wiringPi failed !");
            return 1;
        }
        for(int i=0;i<10;i++){       //make led pins' mode is output
            pinMode(pins[i], OUTPUT);
            digitalWrite(pins[i],LOW);
        }
        while(1){
            oddLedBarGraph();
            delay(300);
            evenLedBarGraph();
            delay(300);
            allLedBarGraph();
            delay(300);
        }
        return 0;
    }

**ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜**

.. code-block:: c

    int pins[10] = {0,1,2,3,4,5,6,8,9,10};

é…åˆ—ã‚’ä½œæˆã—ã€LEDæ£’ã‚°ãƒ©ãƒ•ï¼ˆ0ã€1ã€2ã€3ã€4ã€5ã€6ã€8ã€9ã€10ï¼‰ã«å¯¾å¿œã™ã‚‹ãƒ”ãƒ³ç•ªå·ã«å‰²ã‚Šå½“ã¦ã€é…åˆ—ã¯LEDã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã€‚

.. code-block:: c

    void oddLedBarGraph(void){
        for(int i=0;i<5;i++){
            int j=i*2;
            digitalWrite(pins[j],HIGH);
            delay(300);
            digitalWrite(pins[j],LOW);
        }
    }

LEDæ£’ã‚°ãƒ©ãƒ•ã®å¥‡æ•°æ¡ã®LEDã‚’é †ç•ªã«ç‚¹ç¯ã•ã›ã‚‹ã€‚

.. code-block:: c

    void evenLedBarGraph(void){
        for(int i=0;i<5;i++){
            int j=i*2+1;
            digitalWrite(pins[j],HIGH);
            delay(300);
            digitalWrite(pins[j],LOW);
        }
    }

LEDæ£’ã‚°ãƒ©ãƒ•ã®å¶æ•°æ¡ã®LEDã‚’é †ç•ªã«ç‚¹ç¯ã•ã›ã‚‹ã€‚

.. code-block:: c

    void allLedBarGraph(void){
        for(int i=0;i<10;i++){
            digitalWrite(pins[i],HIGH);
            delay(300);
            digitalWrite(pins[i],LOW);
        }
    }

LEDæ£’ã‚°ãƒ©ãƒ•ã®LEDã‚’1ã¤ãšã¤ç‚¹ç¯ã•ã›ã‚‹ã€‚

Pythonè¨€èªãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

ã‚¹ãƒ†ãƒƒãƒ—2: ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«å…¥ã‚‹ã€‚

.. raw:: html

   <run></run>

.. code-block::

    cd /home/pi/davinci-kit-for-raspberry-pi/python/

ã‚¹ãƒ†ãƒƒãƒ—3: EXEãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

.. raw:: html

   <run></run>

.. code-block::

    sudo python3 1.1.3_LedBarGraph.py

ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œå¾Œã€LEDãƒãƒ¼ã®LEDãŒå®šæœŸçš„ã«ã‚ªãƒ³/ã‚ªãƒ•ã«ãªã‚‹ã€‚

**ã‚³ãƒ¼ãƒ‰**

.. note::

    ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ **å¤‰æ›´/ãƒªã‚»ãƒƒãƒˆ/ã‚³ãƒ”ãƒ¼/å®Ÿè¡Œ/åœæ­¢** ã§ãã¾ã™ã€‚ ãŸã ã—ã€ãã®å‰ã«ã€ ``davinci-kit-for-raspberry-pi/python`` ã®ã‚ˆã†ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¹ã«ç§»å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
   
.. raw:: html

    <run></run>

.. code-block:: python

    import RPi.GPIO as GPIO
    import time

    ledPins = [11, 12, 13, 15, 16, 18, 22, 3, 5, 24]

    def oddLedBarGraph():
        for i in range(5):
            j = i*2
            GPIO.output(ledPins[j],GPIO.HIGH)
            time.sleep(0.3)
            GPIO.output(ledPins[j],GPIO.LOW)

    def evenLedBarGraph():
        for i in range(5):
            j = i*2+1
            GPIO.output(ledPins[j],GPIO.HIGH)
            time.sleep(0.3)
            GPIO.output(ledPins[j],GPIO.LOW)

    def allLedBarGraph():
        for i in ledPins:
            GPIO.output(i,GPIO.HIGH)
            time.sleep(0.3)
            GPIO.output(i,GPIO.LOW)

    def setup():
        GPIO.setwarnings(False)
        GPIO.setmode(GPIO.BOARD)        # Numbers GPIOs by physical location
        for i in ledPins:
            GPIO.setup(i, GPIO.OUT)   # Set all ledPins' mode is output
            GPIO.output(i, GPIO.LOW) # Set all ledPins to high(+3.3V) to off led

    def loop():
        while True:
            oddLedBarGraph()
            time.sleep(0.3)
            evenLedBarGraph()
            time.sleep(0.3)
            allLedBarGraph()
            time.sleep(0.3)

    def destroy():
        for pin in ledPins:
            GPIO.output(pin, GPIO.LOW)    # turn off all leds
        GPIO.cleanup()                     # Release resource

    if __name__ == '__main__':     # Program start from here
        setup()
        try:
            loop()
        except KeyboardInterrupt:  # When 'Ctrl+C' is pressed, the program destroy() will be  executed.
            destroy()

**ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜**


``ledPins = [11, 12, 13, 15, 16, 18, 22, 3, 5, 24]`` 
é…åˆ—ã‚’ä½œæˆã—ã€LEDæ£’ã‚°ãƒ©ãƒ•ï¼ˆ11ã€12ã€13ã€15ã€16ã€18ã€22ã€3ã€5ã€24ï¼‰ã«å¯¾å¿œã™ã‚‹ãƒ”ãƒ³ç•ªå·ã«å‰²ã‚Šå½“ã¦ã€é…åˆ—ã¯LEDã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã€‚

.. code-block:: python

    def oddLedBarGraph():
        for i in range(5):
            j = i*2
            GPIO.output(ledPins[j],GPIO.HIGH)
            time.sleep(0.3)
            GPIO.output(ledPins[j],GPIO.LOW)

LEDæ£’ã‚°ãƒ©ãƒ•ã®å¥‡æ•°æ¡ã®LEDã‚’é †ç•ªã«ç‚¹ç¯ã•ã›ã‚‹ã€‚

.. code-block:: python

    def evenLedBarGraph():
        for i in range(5):
            j = i*2+1
            GPIO.output(ledPins[j],GPIO.HIGH)
            time.sleep(0.3)
            GPIO.output(ledPins[j],GPIO.LOW)

LEDæ£’ã‚°ãƒ©ãƒ•ã®å¶æ•°æ¡ã®LEDã‚’é †ç•ªã«ç‚¹ç¯ã•ã›ã‚‹ã€‚

.. code-block:: python

    def allLedBarGraph():
        for i in ledPins:
            GPIO.output(i,GPIO.HIGH)
            time.sleep(0.3)
            GPIO.output(i,GPIO.LOW)

LEDæ£’ã‚°ãƒ©ãƒ•ã®LEDã‚’1ã¤ãšã¤ç‚¹ç¯ã•ã›ã‚‹ã€‚

ç¾è±¡ç”»åƒ
-----------------------

.. image:: media/image67.jpeg
