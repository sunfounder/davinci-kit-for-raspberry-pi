.. note::

    隆Hola! Bienvenido a la Comunidad de Entusiastas de SunFounder para Raspberry Pi, Arduino y ESP32 en Facebook. Sum茅rgete en el mundo de Raspberry Pi, Arduino y ESP32 junto a otros entusiastas.

    **驴Por qu茅 unirse?**

    - **Soporte Experto**: Resuelve problemas postventa y desaf铆os t茅cnicos con la ayuda de nuestra comunidad y equipo.
    - **Aprende y Comparte**: Intercambia consejos y tutoriales para mejorar tus habilidades.
    - **Avances Exclusivos**: Accede anticipadamente a anuncios de nuevos productos y adelantos exclusivos.
    - **Descuentos Especiales**: Aprovecha descuentos exclusivos en nuestros productos m谩s recientes.
    - **Promociones Festivas y Sorteos**: Participa en sorteos y promociones especiales.

     驴Listo para explorar y crear con nosotros? Haz clic en [|link_sf_facebook|] y 煤nete hoy mismo.

.. _1.3.1_py_pi5:

1.3.1 Motor
=============

Introducci贸n
---------------

En este proyecto, aprenderemos a usar el L293D para controlar un motor de 
corriente continua (DC) y hacerlo girar en sentido horario y antihorario. 
Dado que el motor de corriente continua requiere una corriente m谩s alta, 
usaremos el M贸dulo de Alimentaci贸n para proporcionar energ铆a de manera segura al motor.

Componentes Necesarios
-------------------------

Para este proyecto, necesitamos los siguientes componentes. 

.. image:: ../python_pi5/img/1.3.1_motor_list.png


Diagrama de Conexiones
-------------------------

.. image:: ../python_pi5/img/1.3.1_motor_schematic.png


Procedimientos del Experimento
---------------------------------

**Paso 1:** Construye el circuito.

.. image:: ../python_pi5/img/1.3.1_motor_circuit.png

.. note::
    El m贸dulo de alimentaci贸n puede usar una bater铆a de 9V con el conector para 
    bater铆a de 9V incluido en el kit. Inserta el capuch贸n del m贸dulo de 
    alimentaci贸n en las tiras de bus de 5V de la protoboard.

.. image:: ../python_pi5/img/1.3.1_motor_battery.jpeg

**Paso 2:** Ve al directorio del c贸digo.

.. raw:: html

   <run></run>

.. code-block::

    cd ~/davinci-kit-for-raspberry-pi/python-pi5

**Paso 3:** Ejecuta el c贸digo.

.. raw:: html

   <run></run>

.. code-block::

    sudo python3 1.3.1_Motor_zero.py

Al ejecutar el c贸digo, el motor primero gira en sentido horario durante 5 
segundos, luego se detiene durante 5 segundos, despu茅s gira en sentido 
antihorario durante 5 segundos y posteriormente se detiene nuevamente por 
5 segundos. Esta serie de acciones se repetir谩 continuamente.

.. warning::

    Si aparece el mensaje de error ``RuntimeError: Cannot determine SOC peripheral base address``, consulta :ref:`faq_soc` 

**C贸digo**

.. note::

    Puedes **Modificar/Restablecer/Copiar/Ejecutar/Detener** el c贸digo a continuaci贸n. Antes de eso, aseg煤rate de estar en la ruta del c贸digo fuente, como ``davinci-kit-for-raspberry-pi/python-pi5``. Despu茅s de modificar el c贸digo, puedes ejecutarlo directamente para ver el efecto.


.. raw:: html

    <run></run>

.. code-block:: python

   #!/usr/bin/env python3
   from gpiozero import Motor
   from time import sleep

   # Inicializa el Motor con GPIO Zero, especificando los pines GPIO para control de avance (17), retroceso (27) y habilitaci贸n (22)
   motor = Motor(forward=17, backward=27, enable=22)

   try:
       # Funci贸n principal para controlar la direcci贸n y movimiento del motor.
       # Alterna la rotaci贸n del motor entre horario y antihorario con pausas intermedias.
       actions = {'CW': motor.forward, 'CCW': motor.backward, 'STOP': motor.stop}  # Define las acciones del motor para facilitar la lectura
       
       while True:
           # Recorre las acciones definidas para controlar la direcci贸n del motor
           for action in ['CW', 'STOP', 'CCW', 'STOP']:
               actions[action]()  # Ejecuta la acci贸n actual (avanzar, parar, retroceder, parar)
               print(f"{action}")  # Muestra la acci贸n actual en la consola
               sleep(5)  # Pausa de 5 segundos antes de proceder a la siguiente acci贸n

   except KeyboardInterrupt:
       # Maneja de forma segura una interrupci贸n de teclado (Ctrl+C) para detener el programa
       pass


**Explicaci贸n del C贸digo**

#. Estas declaraciones de importaci贸n incorporan la clase ``Motor`` de la librer铆a ``gpiozero`` y la funci贸n ``sleep`` del m贸dulo ``time`` para manejar pausas.
    
   .. code-block:: python  

       #!/usr/bin/env python3
       from gpiozero import Motor
       from time import sleep
      

#. Esta l铆nea inicializa un objeto ``Motor``, especificando los pines GPIO para el control de avance (17), retroceso (27) y habilitaci贸n (22).
    
   .. code-block:: python
       
       # Inicializa el Motor con GPIO Zero, especificando los pines GPIO para control de avance (17), retroceso (27) y habilitaci贸n (22)
       motor = Motor(forward=17, backward=27, enable=22)
      

#. Las acciones de control del motor se definen en un diccionario para facilitar la lectura. Un bucle infinito (`while True`) recorre estas acciones, ejecutando cada una durante 5 segundos.
    
   .. code-block:: python
       
       try:
           # Funci贸n principal para controlar la direcci贸n y movimiento del motor.
           # Alterna la rotaci贸n del motor entre horario y antihorario con pausas intermedias.
           actions = {'CW': motor.forward, 'CCW': motor.backward, 'STOP': motor.stop}  # Define las acciones del motor para facilitar la lectura
           
           while True:
               # Recorre las acciones definidas para controlar la direcci贸n del motor
               for action in ['CW', 'STOP', 'CCW', 'STOP']:
                   actions[action]()  # Ejecuta la acci贸n actual (avanzar, parar, retroceder, parar)
                   print(f"{action}")  # Muestra la acci贸n actual en la consola
                   sleep(5)  # Pausa de 5 segundos antes de proceder a la siguiente acci贸n
      

#. Este segmento permite que el programa se termine de manera segura utilizando una interrupci贸n de teclado (Ctrl+C) sin causar errores.
    
   .. code-block:: python
       
       except KeyboardInterrupt:
       # Maneja de forma segura una interrupci贸n de teclado (Ctrl+C) para detener el programa
       pass
      

