.. note::

    춰Hola! Bienvenido a la Comunidad de Entusiastas de SunFounder Raspberry Pi, Arduino y ESP32 en Facebook. Profundiza en Raspberry Pi, Arduino y ESP32 junto a otros entusiastas.

    **쯇or qu칠 unirse?**

    - **Soporte Experto**: Resuelve problemas post-venta y desaf칤os t칠cnicos con la ayuda de nuestra comunidad y equipo.
    - **Aprender y Compartir**: Intercambia consejos y tutoriales para mejorar tus habilidades.
    - **Avances Exclusivos**: Accede anticipadamente a anuncios de nuevos productos y avances.
    - **Descuentos Especiales**: Disfruta de descuentos exclusivos en nuestros productos m치s nuevos.
    - **Promociones Festivas y Sorteos**: Participa en sorteos y promociones navide침as.

    游녤 쯃isto para explorar y crear con nosotros? Haz clic en [|link_sf_facebook|] y 칰nete hoy!

1.3.1 Motor
=============

Introducci칩n
---------------

En esta lecci칩n, aprenderemos a utilizar el L293D para accionar un motor de 
corriente continua y hacerlo girar en sentido horario y antihorario. Dado que 
el motor de corriente continua necesita una corriente mayor, utilizaremos el 
m칩dulo de alimentaci칩n para alimentar los motores por razones de seguridad.

Componentes
---------------

.. image:: img/list_1.3.1.png

Principio
-------------

**L293D**

El L293D es un controlador de motor de 4 canales integrado en un chip que 
soporta alta tensi칩n y alta corriente. Est치 dise침ado para conectarse a niveles 
l칩gicos est치ndar DTL y TTL, y para accionar cargas inductivas (como bobinas de 
rel칠, motores de CC, motores paso a paso) y transistores de conmutaci칩n de 
potencia, entre otros. Los motores de corriente continua son dispositivos que 
convierten la energ칤a el칠ctrica en corriente continua en energ칤a mec치nica. Se 
utilizan ampliamente en accionamientos el칠ctricos debido a su excelente rendimiento 
en la regulaci칩n de velocidad.

A continuaci칩n se muestra la figura de los pines. El L293D tiene dos pines (Vcc1 y Vcc2) para la alimentaci칩n. Vcc2 se utiliza para alimentar el motor, mientras que Vcc1 alimenta el chip. Dado que aqu칤 se utiliza un motor de corriente continua de peque침o tama침o, conectaremos ambos pines a +5V.

.. image:: img/image111.png

La siguiente figura muestra la estructura interna del L293D. El pin EN es un 
pin de habilitaci칩n que solo funciona con un nivel alto; A representa la 
entrada y Y la salida. Puedes ver la relaci칩n entre ellos en la parte inferior 
derecha. Cuando el pin EN est치 en nivel alto, si A est치 en alto, Y saldr치 en 
nivel alto; si A est치 en bajo, Y saldr치 en bajo. Cuando el pin EN est치 en bajo, 
el L293D no funcionar치.

.. image:: img/image334.png

**Motor de Corriente Continua**

.. image:: img/image114.jpeg

Este es un motor de CC de 5V. Girar치 cuando se le d칠 a los dos terminales 
de la placa de cobre un nivel alto y uno bajo. Para mayor comodidad, puedes 
soldar los pines al motor.

.. image:: img/image335.png

**M칩dulo de Alimentaci칩n**

En este experimento, se necesita una gran corriente para accionar el motor, 
especialmente al iniciar y detener, lo que interferir치 severamente con el 
funcionamiento normal de la Raspberry Pi. Por lo tanto, alimentaremos el 
motor por separado con este m칩dulo para que funcione de manera segura y estable.

Puedes simplemente conectarlo en la placa de pruebas para suministrar energ칤a. 
Proporciona voltajes de 3.3V y 5V, y puedes conectar cualquiera de ellos a 
trav칠s de un capuch칩n de puente incluido.

.. image:: img/image115.png

Diagrama Esquem치tico
-----------------------

Conecta el m칩dulo de alimentaci칩n en la placa de pruebas e inserta el capuch칩n 
de puente en el pin de 5V, luego saldr치 un voltaje de 5V. Conecta el pin 1 del 
L293D a GPIO22 y config칰ralo en nivel alto. Conecta el pin 2 a GPIO27 y el pin 7 
a GPIO17, luego establece un pin en alto y el otro en bajo. De esta manera, puedes 
cambiar la direcci칩n de rotaci칩n del motor.

.. image:: img/image336.png


Procedimientos Experimentales
--------------------------------

**Paso 1:** Construir el circuito.

.. image:: img/1.3.1.png
    :width: 800

.. note::
    El m칩dulo de alimentaci칩n puede usar una bater칤a de 9V con el conector 
    de bater칤a de 9V incluido en el kit. Inserta el capuch칩n de puente del 
    m칩dulo de alimentaci칩n en las tiras de bus de 5V de la placa de pruebas.

.. image:: img/image118.jpeg

**Paso 2**: Acceder a la carpeta del c칩digo.

.. raw:: html

    <run></run>

.. code-block::

    cd ~/davinci-kit-for-raspberry-pi/c/1.3.1/

**Paso 3**: Compilar.

.. raw:: html

   <run></run>

.. code-block::

    gcc 1.3.1_Motor.c -lwiringPi

**Paso 4**: Ejecutar el archivo ejecutable.

.. raw:: html

   <run></run>

.. code-block::

    sudo ./a.out

Al ejecutar el c칩digo, el motor primero girar치 en sentido horario 
durante 5 segundos, luego se detendr치 durante 5 segundos, despu칠s girar치 
en sentido antihorario durante 5 segundos; posteriormente, el motor se 
detendr치 durante 5 segundos. Esta serie de acciones se repetir치.

.. note::

    Si no funciona despu칠s de ejecutarlo, o aparece un mensaje de error: \"wiringPi.h: No such file or directory\", consulta :ref:`c code is not working?`.

**C칩digo**

.. code-block:: c

    #include <wiringPi.h>
    #include <stdio.h>

    #define MotorPin1       0
    #define MotorPin2       2
    #define MotorEnable     3

    int main(void){
        int i;
        if(wiringPiSetup() == -1){ //si la inicializaci칩n de wiring falla, imprime un mensaje en pantalla
            printf("setup wiringPi failed !");
            return 1;
        }
        
        pinMode(MotorPin1, OUTPUT);
        pinMode(MotorPin2, OUTPUT);
        pinMode(MotorEnable, OUTPUT);
        while(1){
            printf("Clockwise\n");
            delay(100);
            digitalWrite(MotorEnable, HIGH);
            digitalWrite(MotorPin1, HIGH);
            digitalWrite(MotorPin2, LOW);
            for(i=0;i<3;i++){
                delay(1000);
            }

            printf("Stop\n");
            delay(100);
            digitalWrite(MotorEnable, LOW);
            for(i=0;i<3;i++){
                delay(1000);
            }

            printf("Anti-clockwise\n");
            delay(100);
            digitalWrite(MotorEnable, HIGH);
            digitalWrite(MotorPin1, LOW);
            digitalWrite(MotorPin2, HIGH);
            for(i=0;i<3;i++){
                delay(1000);
            }

            printf("Stop\n");
            delay(100);
            digitalWrite(MotorEnable, LOW);
            for(i=0;i<3;i++){
                delay(1000);
            }
        }
        return 0;
    }

**Explicaci칩n del C칩digo**

.. code-block:: c

    digitalWrite(MotorEnable, HIGH);

Habilita el L239D.

.. code-block:: c

    digitalWrite(MotorPin1, HIGH);
    digitalWrite(MotorPin2, LOW);

Establece un nivel alto para 2A (pin 7); dado que 1,2EN (pin 1) est치 en 
nivel alto, 2Y saldr치 en nivel alto.

Establece un nivel bajo para 1A, luego 1Y saldr치 en nivel bajo, y 
el motor girar치.

.. code-block:: c

    for(i=0;i<3;i++){
    delay(1000);
    }

Este bucle retrasa durante 3*1000 ms.

.. code-block:: c

    digitalWrite(MotorEnable, LOW)

Si 1,2EN (pin 1) est치 en nivel bajo, el L293D no funcionar치. El motor deja de girar.

.. code-block:: c

    digitalWrite(MotorPin1, LOW)
    digitalWrite(MotorPin2, HIGH)

Invierte el flujo de corriente del motor, luego el motor girar치 en sentido inverso.

